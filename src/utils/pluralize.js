/*
  =========================================
  СКЛОНЕНИЕ ЧИСЛИТЕЛЬНЫХ — pluralize.js
  =========================================

  В русском языке слова меняются в зависимости от числа:
  - 1 тема, 21 тема, 31 тема...
  - 2 темы, 3 темы, 4 темы, 22 темы...
  - 0 тем, 5 тем, 6 тем... 11 тем, 12 тем...

  Правила:
  1. Числа оканчивающиеся на 1 (кроме 11) → единственное число (тема)
  2. Числа оканчивающиеся на 2-4 (кроме 12-14) → "темы"
  3. Все остальные → "тем"
*/

/**
 * Склоняет слово в зависимости от числа
 * @param {number} count - число
 * @param {string} one - форма для 1 (тема, раздел)
 * @param {string} few - форма для 2-4 (темы, раздела)
 * @param {string} many - форма для 0, 5-20 (тем, разделов)
 * @returns {string} - число + правильная форма слова
 *
 * Примеры:
 * pluralize(1, 'тема', 'темы', 'тем')   → "1 тема"
 * pluralize(2, 'тема', 'темы', 'тем')   → "2 темы"
 * pluralize(5, 'тема', 'темы', 'тем')   → "5 тем"
 * pluralize(21, 'тема', 'темы', 'тем')  → "21 тема"
 * pluralize(11, 'тема', 'темы', 'тем')  → "11 тем"
 */
export function pluralize(count, one, few, many) {
  // Берём абсолютное значение (на случай отрицательных чисел)
  const n = Math.abs(count)

  // Последние две цифры (для обработки 11-14)
  const lastTwo = n % 100

  // Последняя цифра
  const lastOne = n % 10

  // Особый случай: 11-14 всегда используют форму "many"
  if (lastTwo >= 11 && lastTwo <= 14) {
    return `${count} ${many}`
  }

  // Проверяем последнюю цифру
  if (lastOne === 1) {
    return `${count} ${one}`      // 1, 21, 31... → "тема"
  }

  if (lastOne >= 2 && lastOne <= 4) {
    return `${count} ${few}`      // 2, 3, 4, 22, 23... → "темы"
  }

  return `${count} ${many}`       // 0, 5, 6, 7... → "тем"
}

/*
  Готовые функции для частых случаев
*/

// Для тем
export function pluralizeTopics(count) {
  return pluralize(count, 'тема', 'темы', 'тем')
}

// Для разделов
export function pluralizeSections(count) {
  return pluralize(count, 'раздел', 'раздела', 'разделов')
}

// Для предметов
export function pluralizeSubjects(count) {
  return pluralize(count, 'предмет', 'предмета', 'предметов')
}
